<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dodge Master</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
  body { background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364); display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
  canvas { background: rgba(255,255,255,0.05); border: 2px solid #fff; border-radius: 15px; }
  #score { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); color: #fff; font-size: 2rem; text-shadow: 2px 2px 5px black; }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="500" height="700"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let player = { x: canvas.width/2 - 25, y: canvas.height - 60, width: 50, height: 50, speed: 7 };
let keys = {};
let obstacles = [];
let score = 0;
let gameOver = false;

// Player movement
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Create obstacles
function spawnObstacle() {
  let width = Math.random() * 50 + 30;
  let x = Math.random() * (canvas.width - width);
  obstacles.push({ x: x, y: -50, width: width, height: 20, speed: Math.random() * 3 + 2 });
}

// Collision detection
function checkCollision(a, b) {
  return a.x < b.x + b.width && a.x + a.width > b.x &&
         a.y < b.y + b.height && a.y + a.height > b.y;
}

// Game loop
function update() {
  if(gameOver) return;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Move player
  if(keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
  if(keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += player.speed;

  // Draw player
  ctx.fillStyle = '#ff4757';
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Obstacles
  if(Math.random() < 0.02) spawnObstacle();
  obstacles.forEach((ob, index) => {
    ob.y += ob.speed;
    ctx.fillStyle = '#1e90ff';
    ctx.fillRect(ob.x, ob.y, ob.width, ob.height);

    if(checkCollision(player, ob)) {
      gameOver = true;
      document.getElementById('score').innerText = `Game Over! Final Score: ${score}`;
    }

    if(ob.y > canvas.height) {
      obstacles.splice(index, 1);
      score++;
      document.getElementById('score').innerText = `Score: ${score}`;
    }
  });

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
